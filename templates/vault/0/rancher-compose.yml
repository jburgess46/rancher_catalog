.catalog:
  name: Vault
  description: |
    HashiCorp Vault
  version: "0.6.0-rancher1"
  category: "Security"
  minimum_rancher_version: v0.56.0
  maintainer: "Forsythe Technology Group"
  support: "Maintained by community members"
  uuid: vault-0.6.0
  info: "This template creates, a scaled HA HashiCorp Vault instance. The configuration is generated with confd from Rancher metadata. Cluster size are variable after deployment, and get reconfigured if refresh interval > 0."
  usage: "1.) Support TLS / SSL is disabled by default.
          2.) If TLS / SSL support is enabled, configure TLS / SSL certificate and private key for Vault configuration.
          3.) Select HA backend.
          4.) Link Vault instances to HA backend service running in the same environment. Rancher doesn't support cross environment links at the moment.
          5.) Select the port for Vault to listen."
  questions:
    - variable: tls_support
      label: "TLS / SSL support"
      description: "Enable TLS / SSL support for Vault configuration"
      required: true
      type: boolean
    - variable: cert
      label: "TLS / SSL server certificate"
      description: "Vault server certificate for TLS / SSL support"
      required: false
      type: multiline
    - variable: key
      label: "TLS / SSL server key"
      description: "Vault private key for TLS / SSL support"
      required: false
      type: multiline
    - variable: backend
      label: "HA backend service"
      description: "HA backend"
      required: true
      type: enum
      options:
        - consul
        - zookeeper
    - variable: backend_service
      label: "External link service"
      description: "Vault HA backend service link"
      required: true
      type: service
    - variable: vault_port
      label: "Vault port"
      default: "8200"
      description: "Vault port exposed for host communication"
      required: false
      type: int
    - variable: telemtry
      label: "Vault telemtry for statisical aggregration"
      description: "Vault server telemtry for statistical aggregation"
      required: false
      type: service
vault:
  scale: 2
  metadata:
    tls_support: ${tls_support}
    cert: ${cert}
    key: ${key}
    backend: ${backend}
    backend_service: ${backend_service}
    port: ${vault_port}
    telemtry: ${telemtry}
vault-config:
  scale: 2
vault-data-volume:
  scale: 2

